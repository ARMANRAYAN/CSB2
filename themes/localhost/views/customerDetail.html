<script type="text/ng-template" id="myModalContent.html">
    <div class="modal-header">
        <h3 class="modal-title">انتخاب مشتری معرفی کننده</h3>
    </div>
    <div class="modal-body">
        <div class="table-scrollable table-scrollable-borderless slimScrollDiv"
             style="height: 350px; overflow: auto; width: auto;">
            <table class="table table-hover table-light">
                <thead>
                <tr class="uppercase">
                    <th colspan="2">
                        نام
                    </th>
                    <th>
                        ایمیل
                    </th>
                    <th>
                        موبایل
                    </th>
                    <th>
                        امتیاز
                    </th>
                </tr>
                </thead>
                <tr ng-click="ok(customer)" ng-repeat="customer in customers">
                    <td class="fit">
                        <img class="user-pic" src="/delegate/resource/assets/admin/layout/img/avatar4.jpg">
                    </td>
                    <td>
                        <a href="javascript:;" class="primary-link">{{customer.name}}</a>
                    </td>
                    <td>
                        {{customer.email}}
                    </td>

                    <td>
                        {{customer.mobile}}
                    </td>

                    <td>
                        <span class="bold font-green-haze">{{customer.score}}</span>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-warning" ng-click="cancel()">انصراف</button>
    </div>
</script>


<!-- BEGIN PAGE HEADER-->
<div class="page-bar">
    <ul class="page-breadcrumb">
        <li>
            <i class="fa fa-home"></i>
            <a href="#/dashboard.html">Home</a>
            <i class="fa fa-angle-right"></i>
        </li>
        <li>
            <a href="#">Dashboard</a>
        </li>
    </ul>
    <div class="page-toolbar hide">
        <div class="btn-group pull-right">
            <button type="button" class="btn btn-sm btn-default dropdown-toggle" dropdown-menu-toggle
                    dropdown-menu-hover data-delay="1000" data-close-others="true">
                Actions <i class="fa fa-angle-down"></i>
            </button>
            <ul class="dropdown-menu pull-right" role="menu">
                <li>
                    <a href="#">
                        <i class="icon-user"></i> New User </a>
                </li>
                <li>
                    <a href="#">
                        <i class="icon-present"></i> New Event <span class="badge badge-success">4</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="icon-basket"></i> New order </a>
                </li>
                <li class="divider">
                </li>
                <li>
                    <a href="#">
                        <i class="icon-flag"></i> Pending Orders <span class="badge badge-danger">4</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="icon-users"></i> Pending Users <span class="badge badge-warning">12</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>
<h3 class="page-title">
    اطلاعات مشتری -
    {{customer.name}}
</h3>


<div id="alert_container" ng-controller="GeneralPageController">
    <alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)">{{alert.message}}</alert>
</div>

<!-- END PAGE HEADER-->
<!-- BEGIN MAIN CONTENT -->
<div >

<!-- BEGIN DASHBOARD STATS -->
<div class="row">
    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <div class="dashboard-stat blue-madison">
            <div class="visual">
                <i class="fa fa-comments"></i>
            </div>
            <div class="details">
                <div class="number">
                    {{stats.totalCustomerPayment}}
                    <span style="line-height: 25px" class="desc">
                        (ریال)
                    </span>
                </div>
                <div class="desc">
                    مبلغ کل پرداختی
                </div>
            </div>
            <a class="more" href="#">
                View more <i class="m-icon-swapright m-icon-white"></i>
            </a>
        </div>
    </div>
    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <div class="dashboard-stat red-intense">
            <div class="visual">
                <i class="fa fa-bar-chart-o"></i>
            </div>
            <div class="details">
                <div class="number">
                    {{stats.totalWeekScore|score}}
                </div>
                <div class="desc">
                    کل امتیاز هفته اخیر
                </div>
            </div>
            <a class="more" href="#">
                View more <i class="m-icon-swapright m-icon-white"></i>
            </a>
        </div>
    </div>
    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <div class="dashboard-stat green-haze">
            <div class="visual">
                <i class="fa fa-shopping-cart"></i>
            </div>
            <div class="details">
                <div class="number">
                    {{stats.totalInDirectScore|score}}
                </div>
                <div class="desc">
                    کل امتیاز غیر مستیم
                </div>
            </div>
            <a class="more" href="#">
                View more <i class="m-icon-swapright m-icon-white"></i>
            </a>
        </div>
    </div>
    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <div class="dashboard-stat purple-plum">
            <div class="visual">
                <i class="fa fa-globe"></i>
            </div>
            <div class="details">
                <div class="number">
                    {{stats.totalDirectScore|score}}
                </div>
                <div class="desc">
                    کل امتیاز مستقیم
                </div>
            </div>
            <a class="more" href="#">
                View more <i class="m-icon-swapright m-icon-white"></i>
            </a>
        </div>
    </div>
</div>
<!-- END DASHBOARD STATS -->

<div class="row">

    <div class="col-md-12 col-sm-12">
        <!-- BEGIN PORTLET-->
        <div style="display: none" class="portlet bordered light ">
            <div class="portlet-title tabbable-line">
                <div class="caption caption-md">
                    <i class="icon-bar-chart font-green-haze hide"></i>
                    <span class="caption-subject font-green-haze bold uppercase">معرفی مشتری جدید</span>
                </div>
                <ul class="nav nav-tabs">
                    <li class="active">
                        <a href="#" data-target="#select_tab" data-toggle="tab">
                            انتخاب از میان مشتریان </a>
                    </li>
                </ul>

            </div>
            <div class="portlet-body">
                <div class="tab-content">
                    <div class="tab-pane active" id="#select_tab">
                        <a ng-click="open()" href="#" class="btn btn-lg yellow">
                            انتخاب از میان مشتریان موجود <i class="fa fa-search"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- END PORTLET-->


        <!-- BEGIN PORTLET-->
        <div class="portlet bordered light ">
            <div class="portlet-title ">
                <div class="caption caption-md">
                    <i class="icon-bar-chart font-green-haze hide"></i>
                    <span class="caption-subject font-green-haze bold uppercase">نمودار امتیازات کسب شده</span>
                </div>


            </div>
            <div class="portlet-body">
                <div style="direction: ltr;" ac-chart="'line'" ac-data="scoreChartData" ac-config="scoreChartConfig"
                     id="chart"
                     class="chart"></div>

            </div>
        </div>

    </div>
</div>
<div class="row">
    <div class="col-md-12 col-sm-12">
        <!-- BEGIN PORTLET-->
        <div class="portlet light bg-inverse">
            <div class="portlet-title">
                <div class="caption caption-md">
                    <i class="icon-bar-chart font-green-haze hide"></i>
                    <span class="caption-subject font-green-haze bold uppercase">اطلاعات مشتری</span>
                </div>
            </div>
            <div class="portlet-body form">

                <div class="form-horizontal" role="form">
                    <div class="form-body">

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label col-md-3">نام:</label>

                                    <div class="col-md-9">
                                        <p class="form-control-static">
                                            <a href="#" editable-text="customer.firstName">{{customer.firstName}}</a>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label col-md-3">نام خانوادگی</label>

                                    <div class="col-md-9">
                                        <p class="form-control-static">
                                            <a href="#" editable-text="customer.lastName">{{customer.lastName}}</a>
                                        </p>
                                    </div>
                                </div>
                            </div>


                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label col-md-3">تلفن همراه</label>

                                    <div class="col-md-9">
                                        <p class="form-control-static">
                                            <a href="#" editable-text="customer.mobile">{{customer.mobile}}</a>
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <!--/span-->
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label col-md-3">کد ملی</label>

                                    <div class="col-md-9">
                                        <p class="form-control-static">
                                            {{customer.nationalCode}}
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <!--/span-->
                        </div>


                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label col-md-3">شماره کارت بانکی</label>

                                    <div class="col-md-9">
                                        <p class="form-control-static">
                                            <a href="#" editable-text="customer.card">{{customer.card}}</a>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <!--/span-->
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label col-md-3">پست الکترونیک</label>

                                    <div class="col-md-9">
                                        <p class="form-control-static">
                                            {{customer.email}}
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <!--/span-->
                        </div>


                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label col-md-3">امتیاز</label>

                                    <div class="col-md-9">
                                        <p class="form-control-static">
                                            {{customer.score|score}}
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <!--/span-->
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label col-md-3">معرف</label>

                                    <div class="col-md-9">
                                        <p class="form-control-static">
                                            <a href="#/customer/{{customer.mentorCustomer.id}}">{{customer.mentorCustomer.name}}</a>
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <!--/span-->
                        </div>

                        <div class="form-actions">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="row">
                                        <div class="col-md-offset-3 col-md-9">
                                            <button type="submit" ng-click="updateCustomer()" class="btn green"><i
                                                    class="fa fa-pencil"></i>
                                                ذخیره تغییرات
                                            </button>
                                            <button ng-click="goCustomerList()" type="button" class="btn default">مشاهده
                                                لیست مشتریان
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <!-- END PORTLET-->
        </div>
    </div>

</div>
<div class="row">

    <div class="col-md-4 col-sm-12">
        <!-- BEGIN PORTLET-->
        <div class="portlet bordered light ">
            <div class="portlet-title">
                <div class="caption caption-md">
                    <i class="icon-bar-chart font-green-haze hide"></i>
                    <span class="caption-subject font-green-haze bold uppercase">لیست امتیازات اخیر</span>
                </div>
                <div class="actions">
                    <div class="btn-group btn-group-devided" data-toggle="buttons">

                    </div>
                </div>
            </div>
            <div class="portlet-body">
                <div class="table-scrollable table-scrollable-borderless">
                    <table class="table table-hover table-light">
                        <thead>
                        <tr class="uppercase">
                            <th colspan="1">
                                تاریخ
                            </th>
                            <th>
                                میزان
                            </th>
                            <th>
                                نوع
                            </th>
                        </tr>
                        </thead>
                        <tr ng-repeat="score in scores">
                            <td>
                                {{score.date}}
                            </td>
                            <td>
                                {{score.value | score}}
                            </td>

                            <td class="">
                                <span class="label label-bg label-{{score.isDirect ? 'success' : 'warning'}}">
                                    {{score.isDirect ? 'مستقیم' : 'غیر مستقیم'}}
                                </span>

                            </td>

                            <td>
                                <span class="bold font-green-haze">{{invitee.score|score}}</span>
                            </td>

                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <!-- END PORTLET-->
    </div>


    <div class="col-md-8 col-sm-12">
        <!-- BEGIN PORTLET-->
        <div class="portlet bordered light ">
            <div class="portlet-title">
                <div class="caption caption-md">
                    <i class="icon-bar-chart font-green-haze hide"></i>
                    <span class="caption-subject font-green-haze bold uppercase">لیست مشتری های معرفی شده</span>
                    <span class="caption-helper hide">لیست مشتریان</span>
                </div>
                <div class="actions">
                    <div class="btn-group btn-group-devided" data-toggle="buttons">

                    </div>
                </div>
                <div class="inputs">
                    <div class="portlet-input input-inline input-medium">
                        <div class="input-group">
                            <input type="text" data-ng-change="doSearch()" ng-model="query"
                                   class="form-control input-circle-left" placeholder="search...">
                                    <span class="input-group-btn">
                                    <button class="btn btn-circle-right btn-default" type="submit">Go!</button>
                                    </span>
                        </div>
                    </div>
                </div>

            </div>
            <div class="portlet-body">
                <div class="row number-stats margin-bottom-30">
                    <div class="col-md-6 col-sm-6 col-xs-6">
                        <div class="stat-left">
                            <div class="stat-chart">
                                <!-- do not line break "sparkline_bar" div. sparkline chart has an issue when the container div has line break -->
                                <div id="sparkline_bar"></div>
                            </div>
                            <div class="stat-number">
                                <div class="title">
                                    تعداد
                                </div>
                                <div class="number">
                                    {{customer.invitees.length}}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-sm-6 col-xs-6">
                        <div class="stat-right">
                            <div class="stat-chart">
                                <!-- do not line break "sparkline_bar" div. sparkline chart has an issue when the container div has line break -->
                                <div id="sparkline_bar2"></div>
                            </div>
                            <div class="stat-number">
                                <div class="title">
                                    جمع امتیازات
                                </div>
                                <div class="number">
                                    {{inviteesTotalScore|score}}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="table-scrollable table-scrollable-borderless">
                    <table class="table table-hover table-light">
                        <thead>
                        <tr class="uppercase">
                            <th colspan="2">
                                نام
                            </th>
                            <th>
                                ایمیل
                            </th>
                            <th>
                                موبایل
                            </th>
                            <th>
                                امتیاز
                            </th>
                            <th>
                                حذف
                            </th>
                        </tr>
                        </thead>
                        <tr ng-repeat="invitee in customer.invitees">
                            <td class="fit">
                                <img class="user-pic"
                                     src="/delegate/resource/assets/admin/layout/img/avatar4.jpg">
                            </td>
                            <td>
                                <a href="#/customer/{{invitee.id}}" class="primary-link">{{invitee.name}}</a>
                            </td>
                            <td>
                                {{invitee.email}}
                            </td>

                            <td>
                                {{invitee.mobile}}
                            </td>

                            <td>
                                <span class="bold font-green-haze">{{invitee.score|score}}</span>
                            </td>

                            <td>
                                <a ng-click="deleteInvitee(invitee)" class="bold font-red"><i
                                        style="font-size:20px" class="fa fa-times"></i></a>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <!-- END PORTLET-->
    </div>





    <div class="col-md-8 col-sm-12">
        <!-- BEGIN PORTLET-->
        <div class="portlet light grey">
            <div class="portlet-title">
                <div class="caption caption-md">
                    <i class="icon-bar-chart font-green-haze hide"></i>
                    <span class="caption-subject font-green-haze bold uppercase">لیست پرداخت های شما</span>
                    <span class="caption-helper hide">لیست مشتریان</span>
                </div>
                <div class="actions">
                    <div class="btn-group btn-group-devided" data-toggle="buttons">

                    </div>
                </div>


            </div>
            <div class="portlet-body">

                <div class="col-md-9 col-sm-12">

                    <label class="control-label col-md-3">بازه مبلغ:</label>

                    <div class="input-icon col-md-4">
                        <i class="fa fa-arrow-circle-down"></i>
                        <input ng-enter="doSearchPayment()" ng-model="filter.fromAmount" type="text"
                               class="form-control" empty-to-null/>
                    </div>
                    <div class="input-icon col-md-4">
                        <i class="fa fa-arrow-circle-up"></i>
                        <input ng-enter="doSearchPayment()" ng-model="filter.toAmount" type="text" class="form-control"
                               empty-to-null/>
                    </div>
            </div>

            <div class="col-md-3 col-sm-12">
                <button ng-click="doSearchPayment()" class="btn blue btn-block">
                    جسنجو
                </button>
            </div>

                <span style="height: 40px; line-height: 40px;" class="block col-md-12 bg-grey-cararra margin-top-20">
                    نتایج جستجو
                </span>

                <div class="table-scrollable table-scrollable-borderless">
                    <table class="table table-hover table-light">
                        <thead>
                        <tr class="uppercase">
                            <th>
                                مشتری
                            </th>
                            <th>
                                مبلغ
                            </th>
                            <th>
                                توضیحات
                            </th>
                            <th>
                                شماره کارت
                            </th>
                            <th>
                                وضعیت
                            </th>
                        </tr>
                        </thead>
                        <tr ng-repeat="payment in payments">

                            <td>
                                {{payment.customer.name}}
                            </td>
                            <td>
                                {{payment.amount}}
                            </td>

                            <td style="direction: ltr; text-align: right;">
                                {{payment.description}}
                            </td>
                            <td style="direction: ltr; text-align: right;">
                                {{payment.card}}
                            </td>


                            <td>
                                <span ng-if="payment.status == 1" class="label label-bg label-warning">
                                                                    بررسی نشده
                                </span>
                                <span ng-if="payment.status == 0" class="label label-bg label-success">
                                    واریز شده
                                </span>
                                <span ng-if="payment.status == 20" class="label label-bg label-blue">
                                    در دست بررسی
                                </span>
                                <span ng-if="payment.status == 4" class="label label-bg label-danger">
                                    رد شده
                                </span>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <!-- END PORTLET-->
    </div>
</div>

<div class="row">

</div>
<!-- END MAIN CONTENT -->
<!-- BEGIN MAIN JS & CSS -->
<script>
    //Index.init();
    //Tasks.initDashboardWidget();
</script>
<!-- BEGIN MAIN JS & CSS -->